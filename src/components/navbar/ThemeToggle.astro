---
import { Icon } from "astro-icon/components";
---

<button
  id="theme-toggle"
  class="border-2 border-black dark:border-white rounded-md p-2 bg-white dark:bg-black text-black dark:text-white transition-colors duration-150 hover:bg-black dark:hover:bg-white hover:text-white dark:hover:text-black"
>
  <Icon id="sun" name="sun" size="24" />
  <Icon id="moon" name="moon" size="24" />
  <span class="sr-only">Toggle theme</span>
</button>

<script>
  document.getElementById("theme-toggle")?.addEventListener("click", () => {
    const oldTheme = localStorage.getItem("theme");
    const newTheme = oldTheme === "dark" ? "light" : "dark";
    localStorage.setItem("theme", newTheme);
    document.documentElement.classList.toggle("dark", newTheme === "dark");
  });
</script>

<style>
  #sun {
    display: none;
  }
  #moon {
    display: block;
  }

  :global(.dark) {
    #sun {
      display: block;
    }
    #moon {
      display: none;
    }
  }
</style>
